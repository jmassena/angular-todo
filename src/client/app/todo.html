<div class="container-fluid">
  <!-- <h1>{{vm.pageTitle}}</h1> -->



  <!-- <div class=".container-fluid">
    <div class="row-fluid">
      <div class="col-md-1">Status</div>
      <div class="col-md-2">Title</div>
      <div class="col-md-3">Notes</div>
      <div class="col-md-2">Created</div>
      <div class="col-md-2">Due</div>
      <div class="col-md-2">Action</div>
    </div>
  </div> -->

  <!-- orderBy:['-createdDateTime','dueDateTime']" -->

  <!-- ng-class="{danger: todo.dueDateTime < todo.now}" -->
  <!-- | orderByDate:'dueDateTime':true" -->
  <!-- orderByDateTimeNullIsMax:'dueDateTime':true" -->
  <table class="table table-striped table-bordered table-hover table-condensed">
    <thead>
      <tr>
        <th></th>
        <th>Title</th>
        <th>Notes</th>
        <th>Created</th>
        <th>Due</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="todo in vm.todos| orderBy: [vm.dueDateOrder, 'createdDateTime']: true"
          ng-class="{danger: vm.isOverDue(todo.dueDateTime)}" >
        <td><input type="checkbox" ng-checked="todo.status=='completed'"</td>
        <td title="{{todo.title}}">{{vm.truncate(todo.title, 50)}}</td>
        <td title="{{todo.notes}}">{{vm.truncate(todo.notes, 50)}}</td>
        <td>{{todo.createdDateTime | date:'MM/dd/yyyy h:mm a'}}</td>
        <td>{{todo.dueDateTime | date:'MM/dd/yyyy h:mm a'}}</td>
        <td>
          <a class="list-action" ng-click="vm.selectedTodoId=todo._id;vm.editMode='edit'" data-toggle="modal" data-target="#todoDeleteConfirm" href="#">
            <span class="glyphicon glyphicon-pencil color-edit"></span>
          </a>

          <a class="list-action" ng-click="vm.selectedTodoId=todo._id;vm.editMode='delete'" data-toggle="modal" data-target="#todoDeleteConfirm" href="#">
            <span class="glyphicon glyphicon-remove color-delete"></span>
          </a>
        </td>
      </tr>
    </tbody>
  </table>
  <button type="button" class="btn btn-primary" ng-click="vm.editMode='create'" data-target="#todoCreate" data-toggle="modal" >Add</button>

  <!-- Delete dialog -->
  <div class="modal" id="todoDeleteConfirm">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
          <h4 class="modal-title">Confirm Delete</h4>
        </div>

        <div class="modal-body">
          <p>Delete Todo?</p>
        </div>

        <div class="modal-footer">
          <button type="button" ng-click="vm.selectedTodoId=null" class="btn btn-default" data-dismiss="modal">No</button>
          <button type="button" ng-click="vm.deleteTodo()" class="btn btn-primary" data-dismiss="modal">Yes</button>
        </div>
      </div>
    </div>
  </div>

    <!-- Create/Edit dialog -->
    <div class="modal" id="todoCreate" >

      <div class="modal-dialog" >
        <div class="modal-content">

          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
              </button>
            <h4 class="modal-title">{{vm.editMode=='edit'?'Edit':'Create'}}</h4>
          </div>

          <div class="modal-body">
            <form name="vm.todoForm" class="validated-form"  novalidate>

              <!-- Title -->
              <div class="form-group">
                <label class="control-label" for="newTodoTitle">Title</label>
                <input type="text" class="form-control" id="newTodoTitle" name="title" ng-model="vm.formData.title" placeholder="What to do?" required />
                <br />
                <div class="alert-danger" ng-show="vm.todoForm.title.$touched">
                  <span ng-show="vm.todoForm.title.$error.required">title is required</span>
                </div>
              </div>

              <!-- Notes -->
              <div class="form-group">
                <label class="control-label" for="newTodoNotes" >Notes</label>
                <input type="text" class="form-control" name="notes" placeholder="(optional) Extra information" id="newTodoNotes" ng-model="vm.formData.notes" />
              </div>

              <!-- Due Date -->
              <div class="form-group">
                <label class="control-label" for="newTodoDueDate" >Due</label>
                <input type='text' class="form-control" name="dueDateTime" id="newTodoDueDate" ng-model="vm.formData.dueDateTime"
                datetimepicker datetimepicker-options="{showClose:true}" placeholder="(optional) Due date and time" />
              </div>

              <!-- Buttons -->
              <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal" ng-click="vm.clearForm();vm.selectedTodoId=null">Cancel</button>
                <button type="submit" ng-disabled="vm.todoForm.$invalid"  data-dismiss="modal" ng-click="vm.submitTodo()"  class="btn btn-success">Submit</button>
              </div>
            </form>
          </div>

      </div> <!-- content -->
    </div>  <!-- dialog -->
  </div>  <!--modal -->


  <script>
  $('#todoCreate').on('shown.bs.modal', function () {
      $('#newTodoTitle').focus();
  })
  </script>

</div>
